拡大鏡.anm 説明書 by 連結歯車

- 拡大鏡.anmについて -
	拡大鏡.anmは背景の一部を拡大・縮小したり、背景の一部にアニメーション効果を追加したり
	することができるスクリプトです。
	一般的な拡大で使える「ふつう」、レンズのような効果をかけられる「ガラス」、
	画質の劣化を考慮した「シーン」の3種類があります。
	
- ダウンロード時の注意 -
	zipフォルダでダウンードして解凍するとファイル名が文字化けすることがあります。
	その場合は解凍ソフトを使わずにエクスプローラーからそのまま開いてください。
	zipフォルダを左クリックすると自動で解凍されるときは，右クリック→プログラムから開く→エクスプローラー
	で開いてください。

- 導入方法 -
	「exedit.auf」と同じ階層にある「script」フォルダまたはその中の適当なフォルダに
	.anmファイルを入れてください。
	このスクリプトにはrikky氏のrikky_module.dllバージョン1.3以降(2018/5/31版以降)が必要です。
	もっていない人は以下のサイトからダウンロードして導入してください。
	http://hazumurhythm.com/wev/downloads/
	
- 使い方 -
	○基本（「ふつう」と「ガラス」共通）
		拡張編集のレイヤーに他のオブジェクトを配置した後、その下のレイヤーに図形オブジェクトを置きます。
		そこにアニメーション効果の「ふつう@拡大鏡」または「ガラス@拡大鏡」を
		追加します。
		トラックバーの倍率を動かすと、背景領域が拡大・縮小します。
		図形のサイズで対象の背景領域の大きさを調整することができます。
		
	○アニメーション効果の追加（「ふつう」と「シーン」）
		背景の一部にフィルタをかける部分フィルタはアニメーション効果を追加できませんが、
		「ふつう」または「シーン」を使ったあとにアニメーション効果を追加することで、背景の一部に
		アニメーション効果をかけることができます。
		
	○「ふつう」のパラメータ
		◇領域X
			背景領域のX座標を指定します。
		◇領域Y
			背景領域のY座標を指定します。
		◇倍率
			図形オブジェクトのサイズを変えずに、表示する背景領域の拡大率を設定します。
		◇回転
			回転させます。
			図形の回転とは異なります。
		◇領域表示(編集用)
			チェックを入れると編集時にだけ対象の背景領域に色を付けます。
			編集補助用です。
			動画出力中には表示されません。
		◇独立座標
			チェックを入れると対象の背景領域の座標が図形の座標に追従しなくなります。
		◇上下反転
			上下反転を指定します。
		◇左右反転
			左右反転を指定します。
		◇画面外領域色
			対象の背景領域に画面外領域が含まれるとき、そこを塗り潰すかどうかを指定します。
		◇背景塗り潰し
			背景を塗り潰すかどうかを指定します。
			"しない"			：背景を塗り潰しません
			"全域"				：背景のすべてを塗り潰します
			"対象の背景領域"	：対象の背景領域だけを塗り潰します。
		◇└拡大率
			背景塗り潰しが"対象の背景領域"のとき、塗り潰す領域の拡大率をパーセント単位で
			変更できます。
		◇└色
			それぞれの塗り潰しの色を指定します。
		◇└透明度
			それぞれの塗り潰しの透明度を指定します。
		◇領域色(編集用)
			領域表示(編集用)のチェックが入っているときに使う色を指定します。
			
	○「ガラス」使用上の注意
		まれにAviUtlが停止するエラーが出るので、バックアップをしっかりとっておいたほうが
		よいかもしれません。

	○「ガラス」のパラメータ
		◇倍率
			図形オブジェクトのサイズを変えずに、表示する背景領域の拡大率を設定します。
		◇ぼかし
			ぼかす範囲を指定します。
		◇仮想Z
			フレームバッファまでの仮想的な高さの数値を指定します。
			背景までの角度がまっすぐだと効果は見えません。
		◇屈折率
			屈折率を指定します。
			背景までの角度がまっすぐだと効果は見えません。
		◇上下反転
			上下反転を指定します。
		◇左右反転
			左右反転を指定します。		
		◇背景を同期
			チェックを入れると屈折する画像を常時更新します。
		◇裏面を非表示
			裏面の非表示を指定します。
		◇○単色化
			チェックを入れると単色化します。
		◇└色
			単色化の色を指定します。
		◇レンズ効果
			ガラスにレンズのような効果を設定できます。
			"なし"			：効果を付けません
			"凸"			：凸レンズ気味に映し出されるようになります
			"凹"			：凹レンズ気味に映し出されるようになります
			"自動切換え"	：倍率によって自動で切り換わります
								倍率が100のとき			："なし"と同じ
								倍率が100を超えるとき	："凸"と同じ
								倍率が100未満のとき		："凹"と同じ
		◇画面外領域
			屈折する光が四隅、四辺を超えたときの処理の仕方を指定します。
		    "ループ"		：境界までくると反対側からループしてような処理になります
		    "反転"			：境界より先はイメージが反転した処理になります
		    "引き伸ばし"	：境界の色を引き伸ばした処理になります

	○「シーン」について
		「ふつう」では画質の劣化が気になるときに「シーン」を使います。
		元の背景オブジェクトが縮小されていなければ、「シーン」を使った場合も
		劣化して見えます。
		
	○「シーン」の使い方
		1.	まず、ルートで背景を拡大したいレイヤーに図形をおき、
			アニメーション効果の「シーンコントローラ@拡大鏡」を追加します。
		2. 	続いて背景となるオブジェクトを丸ごとシーンにコピペします。
		3.	シーンの第1レイヤーにグループ制御を挿入し、アニメーション効果の
			「シーン内のグループ@拡大鏡」を追加します。
			（すでにグループ制御を使用している場合は、すべてのオブジェクトに
			「シーン内のグループ@拡大鏡」が適用されるよう、それぞれのグループ制御に追加します。）
		4.	ルートに戻って先ほどのシーンを追加します。
		5.	そこにアニメーション効果の「シーンオブジェクト連動@拡大鏡」を追加します。
			（拡大する領域と座標や回転を連動させない場合は不要です。）
		6.	座標を連動させる場合は「上のオブジェクトでクリッピング」で
			形を変えられます。
			（連動させない場合で形を変えるときは「マスク」を使ってください。）
			上のオブジェクトでクリッピングを使っ場合は、「シーンコントローラ@拡大鏡」を
			付けた図形のサイズを変更します。
		7.	「シーンコントローラ@拡大鏡」を付けた図形の拡大率で倍率を調整します。
	
	○シーンコントローラのパラメータ
		◇表示
			チェックを外すと図形が非表示になります。
	
	○シーンオブジェクト連動のパラメータ
		◇XY座標
			1にするとシーンコントローラのX・Y座標を連動させます。
		◇Z座標
			1にするとシーンコントローラのZ座標を逆向きに連動させます。
			1のときにシーンコントローラのZが大きくすると、これを付けた
			オブジェクトのZは小さくなります。
		◇Z軸回転
			1にするとシーンコントローラのZ軸回転を逆向きに連動させます。
			1のときは背景はせず、図形だけが回転しているように見えます。
		◇オブジェクトの座標を反映
			オブジェクトのXYZ座標を反映するか指定します。
			ただし、中心座標は常に反映されます。
			
	○テキスト拡大してもぼかさない方法
		テキストは「シーン」の倍率分だけサイズを大きくし、
		逆にその分拡大率を小さくするとぼやけません。
		例：元のテキストが拡大率100、サイズ20のとき、「シーン」で最大3倍に拡大する場合
			シーンにコピペしたテキスト：
				拡大率＝100÷3＝33.33
				サイズ＝20×3＝60
				
		ただし、文字数と最大画像サイズによってはテキストが切れるかもしれません。
				
	○「シーン」の応用
		◇連動
			シーンオブジェクト連動@拡大率は他のオブジェクトに
			付けて連動させることもできます。
		
		◇別のものを表示
			シーンから読み込んでいるため、別のオブジェクトを表示することができます。
			例：突然別のものが出現
				透視めがね（服の中とか…）
		
		◇無限に拡大
			拡大し続ける映像を一度縮小したオブジェクトの画質を劣化させずに
			作ることができます。
			「シーン内のグループ@拡大鏡」を付けたグループ制御と背景オブジェクトを
			シーン内で何回かコピペ、それぞれの拡大率を変更します。
			必要に応じて座標やZ軸回転を変更します。
			一番下のレイヤーに最後の画像（次の場面の画像や、さらに繰り返す画像）
			を配置します。
			ルートでは「シーンコントローラ@拡大率」を付けた図形の拡大率を
			増加させていきます。
		
	○「シーン」の注意事項
		一部のカスタムオブジェクトやアニメーション効果を持つオブジェクトは適用できません。
		グループ制御のX軸回転・Y軸回転と「シーンコントローラ@拡大率」を付けた図形の
		X軸回転・Y軸回転を組み合わせると座標がずれます。
		
	○拡大鏡サンプル.aupについて
		拡大鏡を使ったサンプルプロジェクトファイルです。
		柄のついたルーペのようなものも入っています。
	
- カラーパレットについて -
	本スクリプトのカラーパレットはカラーユニバーサルデザイン推奨配色セット制作委員会による
	推奨配色セットver4画面用にしたがって作成したものです。
	配色は「バリアフリーに配慮した見分けやすい色の組み合わせ」となっています。
	
	○出典
		『カラーユニバーサルデザイン推奨配色セット ガイドブック』第２版
		発行年：2018年
		発行者：カラーユニバーサルデザイン推奨配色セット制作委員会

		※カラーパレットの色を使う際に出典の表示は必要ありません。

- スクリプトの利用について -
	連結歯車がAviUtlのユーザー向けに製作したスクリプトは連結歯車の許可なく複製・改変・再配布することができます。
	ただし、外部のスクリプトや制作物を組み込んだ箇所はその制作者の利用条件によります。

- 免責事項 -
	本スクリプトの動作保証はしておりません。
	本スクリプトの利用で生じたいかなる損失・損害等については連結歯車は一切の責任を負いません。

- 履歴 -
	[2018/09/22]
	公開